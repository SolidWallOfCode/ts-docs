@startuml

legend
Writer Initiated I/O
endlegend

actor Writer
participant write_VIO
database TSVConn
participant Reader

group Setup
activate TSVConn
note over Writer: Create TSIOBuffer
note over Writer : Add data to TSIOBuffer
Writer --> TSVConn : TSVConnWrite
activate write_VIO
TSVConn --> Reader : TS_EVENT_VCONN_READ_READY
end

loop Transfer
note over Reader : Consume data from TSIOBuffer
Reader --> Writer : TS_EVENT_VCONN_WRITE_READY

note over Writer : Add data to TSIOBuffer
Writer --> Reader: TS_EVENT_VCONN_READ_READY

end

note over Writer, Reader : When VIO bytes done == VIO bytes todo

group Finish
Writer --> Reader : TS_EVENT_VCONN_WRITE_COMPLETE
deactivate write_VIO
Reader --> Writer : TS_EVENT_VCONN_READ_COMPLETE
end

@enduml
